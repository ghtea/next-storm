{"ast":null,"code":"import _objectSpread from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _taggedTemplateLiteral from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  \\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n  width: 60px;\\n  height: 100%;\\n  \\n  border-radius: 6px;\\n\"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n\\twidth: 110px;\\n\\theight: 100%;\\n\\t\\n\\tborder-radius: 6px;\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n\\twidth: 150px;\\n\\theight: 100%;\\n\\t\\n\\tborder-radius: 6px;\\n\\tborder: 1px solid \",\";\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  \\n  margin-top: 20px;\\n  margin-bottom: 20px;\\n  \\n  \\n\\theight: 36px;\\n\\tdisplay: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  \\n  & > * {\\n  \\tmargin-left: 5px;\\n  \\tmargin-right: 5px;\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n\\n\\tdisplay: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  \\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n\\n  width: 150px;\\n  height: 100%;\\n  \\n  color: \",\";\\n  \\n  border-radius: 4px;\\n  \\n  & > div {\\n    height: 100%;\\n  }\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  \\n  margin-top: 10px;\\n  margin-bottom: 10px;\\n  \\n\\theight: 30px;\\n\\tdisplay: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  \\n  & > * {\\n  \\tmargin-left: 5px;\\n  \\tmargin-right: 5px;\\n  }\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1.6rem;\\n  font-weight: bold;\\n  \\n  height: 30px;\\n  \\n  display: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  \\n  & > div {\\n    width: auto;\\n    margin-left: 8px;\\n    margin-right: 8px;\\n  }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  height:100%;\\n  \\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  align-items: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import dotenv from'dotenv';import React,{useEffect,useState}from'react';import styled from'styled-components';import axios from'axios';import{connect}from\"react-redux\";import{replaceWorking as _replaceWorking}from\"../../redux/store\";import _readPlanTeam from\"../../redux/thunks/readPlanTeam\";import _addRemoveNotification from\"../../redux/thunks/addRemoveNotification\";import{NavLink,useHistory}from'react-router-dom';import{Div,Input,Button}from'../../styles/DefaultStyles';import useInput from'../../tools/hooks/useInput';import{getTimeStamp}from'../../tools/vanilla/time';import IconWorking from'../../svgs/IconWorking';import IconCopy from'../../svgs/basic/IconCopy';import IconAdministrator from'../../svgs/basic/IconAdministrator';import IconViewer from'../../svgs/basic/IconViewer';import{CopyToClipboard}from'react-copy-to-clipboard';// STYLES\nvar DivAddingPlayer=styled(Div)(_templateObject());var DivHeader=styled(Div)(_templateObject2());var DivTitle=styled(Div)(_templateObject3());var GroupCopy=styled(Div)(_templateObject4());var ButtonCopy=styled(Button)(_templateObject5(),function(props){return props.theme.color_normal;});/*\nconst DivId = styled(Div)`\n  color: ${props => props.theme.color_weak};\n`*/var DivBody=styled(Div)(_templateObject6());var DivInputAdd=styled(Div)(_templateObject7());var InputBattletag=styled(Input)(_templateObject8(),function(props){return props.theme.color_weak;});var InputName=styled(Input)(_templateObject9());var ButtonAdd=styled(Button)(_templateObject10());/*\nconst ButtonAddOnly = styled(Button)`\n  width: 60px;\n  height: 100%;\n  \n  border-radius: 4px;\n`\n*/var DivIconWorking=styled(Div)(_templateObject11());var AddingPlayer=function AddingPlayer(_ref){var workingAddPlayer=_ref.workingAddPlayer,authority=_ref.authority,planTeam=_ref.planTeam,readPlanTeam=_ref.readPlanTeam,addRemoveNotification=_ref.addRemoveNotification,replaceWorking=_ref.replaceWorking;var inputBattletag=useInput(\"\");//const inputName = useInput(\"\");\n// heroes profile 에서 mmr 가져오기, cPlanTeam 에 플레이어 추가, cPlanTeam 의 플레이의 mmr 추가 모두\nvar onClick_ButtonAdd=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,statusPlayer){var battletag,idPlanTeam,listRegionMain,res_player_add;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:battletag=inputBattletag.value;//let name = inputName.value;\nidPlanTeam=planTeam._id;if(!inputBattletag.value){_context.next=23;break;}_context.prev=3;replaceWorking(\"addPlayer\",true);// playermmr 옮기고, playerEntry 를 plan에 추가하고, 이후에 mmrStandar 도 추가하는 전체 작업 시작\n// listRegionMain (플레이어가 활동하는 지역 목록) 만 가져와서 이후에 이용\n_context.next=7;return axios.put(\"\".concat(process.env.REACT_APP_URL_AHR,\"/player/add\"),{battletag:battletag,idPlanTeam:idPlanTeam//, name: name\n,status:statusPlayer});case 7:res_player_add=_context.sent;listRegionMain=res_player_add.data;//replaceWorking(\"addPlayer\", false)\n//addRemoveNotification(\"success\", \"player has been added!\");\n_context.next=11;return axios.put(\"\".concat(process.env.REACT_APP_URL_AHR,\"/player/add-roles\"),{battletag:battletag,idPlanTeam:idPlanTeam,listRegionMain:listRegionMain});case 11:replaceWorking(\"addPlayer\",false);addRemoveNotification(\"success\",\"player has been added!\");readPlanTeam(idPlanTeam);// important! need new data in redux for rernedering (ex: entry)\ninputBattletag.setValue(\"\");//inputName.setValue(\"\");\n_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](3);replaceWorking(\"addPlayer\",false);addRemoveNotification(\"error\",\"adding player has failed\");// 1. battlelog 잘못입력\n// 2. 게임수가 극히 적은 battletag\n// 3. 내 백엔드 문제\ncase 21:_context.next=24;break;case 23:// 애초에 battletag를 입력 안했다면.\naddRemoveNotification(\"error\",\"type battletag first\");case 24:case\"end\":return _context.stop();}}},_callee,null,[[3,17]]);}));return function onClick_ButtonAdd(_x,_x2){return _ref2.apply(this,arguments);};}();/*\n  // when   workingAddPlayer: O -> X\n  useEffect( () => { \n    (async () => {\n    \n      if (!workingAddPlayer ) {\n        \n        let battletag = inputBattletag.value;\n        const idPlanTeam = planTeam._id;\n        \n        inputBattletag.setValue(\"\"); // 이때 초기화!\n        inputName.setValue(\"\");\n      \n        replaceWorking(\"addRoleGames\", true) // playermmr 옮기고, playerEntry 를 plan에 추가하고, 이후에 mmrStandar 도 추가하는 전체 작업 시작\n          \n        // /add/:battletag/:idPlanTeam/:status\n        try { \n          await axios.put (`${process.env.REACT_APP_URL_AHR}/player/add-role-games`,\n            {\n              battletag: battletag\n              , idPlanTeam: idPlanTeam\n            }\n          );\n          \n        replaceWorking(\"addRoleGames\", false)\n        addRemoveNotification(\"success\", `${battletag}'s role info has been added!`);\n        } \n        catch (error) { \n          replaceWorking(\"addRoleGames\", false)\n          addRemoveNotification(\"error\", `${battletag}'s failed in adding role info`);\n          console.log(error) \n        }\n      }\n      \n    }) ()\n  \n  },[workingAddPlayer])\n  */ // copy: https://www.npmjs.com/package/react-copy-to-clipboard\nreturn/*#__PURE__*/React.createElement(DivAddingPlayer,null,/*#__PURE__*/React.createElement(DivHeader,null,/*#__PURE__*/React.createElement(DivTitle,null,/*#__PURE__*/React.createElement(Div,null,\" \",\"\".concat(planTeam.title),\"  \"),authority===\"administrator\"?/*#__PURE__*/React.createElement(IconAdministrator,{width:\"30px\",height:\"24px\"}):/*#__PURE__*/React.createElement(IconViewer,{width:\"27px\",height:\"24px\"})),/*#__PURE__*/React.createElement(GroupCopy,null,/*#__PURE__*/React.createElement(CopyToClipboard,{text:\"https://ps.avantwing.com/team-generator/\".concat(planTeam._id),onCopy:function onCopy(){addRemoveNotification(\"success\",\"viewer link has been copied\");}},/*#__PURE__*/React.createElement(ButtonCopy,null,/*#__PURE__*/React.createElement(IconCopy,{width:\"20px\",height:\"20px\"}),/*#__PURE__*/React.createElement(Div,null,\" Viewing Link \"))),authority===\"administrator\"&&/*#__PURE__*/React.createElement(CopyToClipboard,{text:\"https://ps.avantwing.com/team-generator/\".concat(planTeam._id,\"?pw=\").concat(planTeam.password),onCopy:function onCopy(){addRemoveNotification(\"success\",\"administrator link has been copied\");}},/*#__PURE__*/React.createElement(ButtonCopy,null,/*#__PURE__*/React.createElement(IconCopy,{width:\"20px\",height:\"20px\"}),/*#__PURE__*/React.createElement(Div,null,\" Editing Link \"))))),/*#__PURE__*/React.createElement(DivBody,null,/*#__PURE__*/React.createElement(DivInputAdd,null,/*#__PURE__*/React.createElement(InputBattletag,Object.assign({},inputBattletag,{placeholder:\"battletag#1234\"})),authority===\"viewer\"&&workingAddPlayer&&/*#__PURE__*/React.createElement(ButtonAdd,null,/*#__PURE__*/React.createElement(DivIconWorking,null,/*#__PURE__*/React.createElement(IconWorking,{width:\"27px\",height:\"24px\"}))),authority===\"viewer\"&&!workingAddPlayer&&/*#__PURE__*/React.createElement(ButtonAdd,{onClick:function onClick(event){return onClick_ButtonAdd(event,\"pending\");}},\" Apply \"),authority===\"administrator\"&&workingAddPlayer&&/*#__PURE__*/React.createElement(ButtonAdd,null,/*#__PURE__*/React.createElement(DivIconWorking,null,/*#__PURE__*/React.createElement(IconWorking,{width:\"27px\",height:\"24px\"}))),authority===\"administrator\"&&!workingAddPlayer&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ButtonAdd,{onClick:function onClick(event){return onClick_ButtonAdd(event,\"confirmed\");}},\" Add \")))));};// <InputName {...inputName} placeholder=\"name\" />\nfunction mapStateToProps(state){return{workingAddPlayer:state.working.addPlayer//,workingPutPlayerMmr: state.working.putPlayerMmr\n//,idPlanTeam: state.idPlanTeam\n//,passwordPlanTeam: state.planTeam.password\n//, loadingPlanTeam: state.loading.planTeam\n//, readyPlanTeam: state.ready.planTeam\n,authority:state.authority,planTeam:_objectSpread({},state.planTeam)};}function mapDispatchToProps(dispatch){return{addRemoveNotification:function addRemoveNotification(situation,message,time){return dispatch(_addRemoveNotification(situation,message,time));},replaceWorking:function replaceWorking(which,true_false){return dispatch(_replaceWorking(which,true_false));},readPlanTeam:function readPlanTeam(idPlanTeam){return dispatch(_readPlanTeam(idPlanTeam));}};}// 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\nexport default connect(mapStateToProps,mapDispatchToProps)(AddingPlayer);","map":{"version":3,"sources":["/usr/projects/parallel-storm/src/components/TeamGenerator/AddingPlayer.js"],"names":["dotenv","React","useEffect","useState","styled","axios","connect","replaceWorking","readPlanTeam","addRemoveNotification","NavLink","useHistory","Div","Input","Button","useInput","getTimeStamp","IconWorking","IconCopy","IconAdministrator","IconViewer","CopyToClipboard","DivAddingPlayer","DivHeader","DivTitle","GroupCopy","ButtonCopy","props","theme","color_normal","DivBody","DivInputAdd","InputBattletag","color_weak","InputName","ButtonAdd","DivIconWorking","AddingPlayer","workingAddPlayer","authority","planTeam","inputBattletag","onClick_ButtonAdd","event","statusPlayer","battletag","value","idPlanTeam","_id","put","process","env","REACT_APP_URL_AHR","status","res_player_add","listRegionMain","data","setValue","title","password","mapStateToProps","state","working","addPlayer","mapDispatchToProps","dispatch","situation","message","time","which","true_false"],"mappings":"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","sourcesContent":["import dotenv from 'dotenv';\nimport React, {useEffect, useState} from 'react';\nimport styled from 'styled-components';\n\nimport axios from 'axios';\n\nimport { connect } from \"react-redux\";\nimport {replaceWorking} from \"../../redux/store\";\nimport readPlanTeam from \"../../redux/thunks/readPlanTeam\";\nimport addRemoveNotification from \"../../redux/thunks/addRemoveNotification\";\n\n\nimport { NavLink, useHistory } from 'react-router-dom';\n\nimport {Div, Input, Button} from '../../styles/DefaultStyles';\n\n\nimport useInput from '../../tools/hooks/useInput';\nimport {getTimeStamp} from '../../tools/vanilla/time';\n\nimport IconWorking from '../../svgs/IconWorking';\nimport IconCopy from '../../svgs/basic/IconCopy';\nimport IconAdministrator from '../../svgs/basic/IconAdministrator';\nimport IconViewer from '../../svgs/basic/IconViewer';\n\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\n\n\n// STYLES\nconst DivAddingPlayer = styled(Div)`\n  height:100%;\n  \n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n`;\n\nconst DivHeader = styled(Div)`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n`\n\nconst DivTitle = styled(Div)`\n  font-size: 1.6rem;\n  font-weight: bold;\n  \n  height: 30px;\n  \n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  & > div {\n    width: auto;\n    margin-left: 8px;\n    margin-right: 8px;\n  }\n`\n\n\nconst GroupCopy = styled(Div)`\n  \n  margin-top: 10px;\n  margin-bottom: 10px;\n  \n\theight: 30px;\n\tdisplay: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  & > * {\n  \tmargin-left: 5px;\n  \tmargin-right: 5px;\n  }\n`\n\n\nconst ButtonCopy = styled(Button)`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  width: 150px;\n  height: 100%;\n  \n  color: ${props => props.theme.color_normal};\n  \n  border-radius: 4px;\n  \n  & > div {\n    height: 100%;\n  }\n`\n\n\n\n\n/*\nconst DivId = styled(Div)`\n  color: ${props => props.theme.color_weak};\n`*/\n\n\nconst DivBody = styled(Div)`\n\n\tdisplay: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  \n`\n\nconst DivInputAdd = styled(Div)`\n  \n  margin-top: 20px;\n  margin-bottom: 20px;\n  \n  \n\theight: 36px;\n\tdisplay: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  & > * {\n  \tmargin-left: 5px;\n  \tmargin-right: 5px;\n  }\n`\n\nconst InputBattletag = styled(Input)`\n\twidth: 150px;\n\theight: 100%;\n\t\n\tborder-radius: 6px;\n\tborder: 1px solid ${props => props.theme.color_weak};\n`\n\nconst InputName = styled(Input)`\n\twidth: 110px;\n\theight: 100%;\n\t\n\tborder-radius: 6px;\n`\n\nconst ButtonAdd = styled(Button)`\n  width: 60px;\n  height: 100%;\n  \n  border-radius: 6px;\n`\n/*\nconst ButtonAddOnly = styled(Button)`\n  width: 60px;\n  height: 100%;\n  \n  border-radius: 4px;\n`\n*/\n\nconst DivIconWorking = styled(Div)`\n  \n`\n\n\n\n\n\n const AddingPlayer = ({\n   \n  workingAddPlayer \n  \n  //, loadingPlanTeam\n  //, readyPlanTeam\n  \n  , authority\n  , planTeam\n  \n  , readPlanTeam\n  , addRemoveNotification\n  , replaceWorking\n   \n }) => {\n\n  const inputBattletag = useInput(\"\");\n  //const inputName = useInput(\"\");\n  \n  \n  // heroes profile 에서 mmr 가져오기, cPlanTeam 에 플레이어 추가, cPlanTeam 의 플레이의 mmr 추가 모두\n  const onClick_ButtonAdd = async (event, statusPlayer) => {\n    \n    let battletag = inputBattletag.value;\n    //let name = inputName.value;\n    const idPlanTeam = planTeam._id;\n    \n    let listRegionMain;\n    //console.log(battletag, name, idPlanTeam, statusPlayer)\n    \n    if (inputBattletag.value) {\n      \n      try {\n        \n        replaceWorking(\"addPlayer\", true) // playermmr 옮기고, playerEntry 를 plan에 추가하고, 이후에 mmrStandar 도 추가하는 전체 작업 시작\n        \n        // listRegionMain (플레이어가 활동하는 지역 목록) 만 가져와서 이후에 이용\n        const res_player_add = await axios.put (`${process.env.REACT_APP_URL_AHR}/player/add`,\n          {\n            battletag: battletag\n            , idPlanTeam: idPlanTeam\n            //, name: name\n            , status: statusPlayer\n          }\n        );\n        \n        listRegionMain = res_player_add.data;\n        \n        //replaceWorking(\"addPlayer\", false)\n        //addRemoveNotification(\"success\", \"player has been added!\");\n        \n        await axios.put (`${process.env.REACT_APP_URL_AHR}/player/add-roles`,\n          {\n            battletag: battletag\n            , idPlanTeam: idPlanTeam\n            , listRegionMain: listRegionMain\n          }\n        );\n          \n        replaceWorking(\"addPlayer\", false)\n        addRemoveNotification(\"success\", `player has been added!`);\n        readPlanTeam(idPlanTeam);  // important! need new data in redux for rernedering (ex: entry)\n        \n        inputBattletag.setValue(\"\");  \n        //inputName.setValue(\"\");\n        \n      }\n      catch(error) {\n        replaceWorking(\"addPlayer\", false)\n        addRemoveNotification(\"error\", \"adding player has failed\");\n        // 1. battlelog 잘못입력\n        // 2. 게임수가 극히 적은 battletag\n        // 3. 내 백엔드 문제\n        \n      }\n      \n    } else { // 애초에 battletag를 입력 안했다면.\n      addRemoveNotification(\"error\", \"type battletag first\");\n    }\n    \n    \n    \n    \n   \n  }\n  \n  /*\n  // when   workingAddPlayer: O -> X\n  useEffect( () => { \n    (async () => {\n    \n      if (!workingAddPlayer ) {\n        \n        let battletag = inputBattletag.value;\n        const idPlanTeam = planTeam._id;\n        \n        inputBattletag.setValue(\"\"); // 이때 초기화!\n        inputName.setValue(\"\");\n      \n        replaceWorking(\"addRoleGames\", true) // playermmr 옮기고, playerEntry 를 plan에 추가하고, 이후에 mmrStandar 도 추가하는 전체 작업 시작\n          \n        // /add/:battletag/:idPlanTeam/:status\n        try { \n          await axios.put (`${process.env.REACT_APP_URL_AHR}/player/add-role-games`,\n            {\n              battletag: battletag\n              , idPlanTeam: idPlanTeam\n            }\n          );\n          \n        replaceWorking(\"addRoleGames\", false)\n        addRemoveNotification(\"success\", `${battletag}'s role info has been added!`);\n        } \n        catch (error) { \n          replaceWorking(\"addRoleGames\", false)\n          addRemoveNotification(\"error\", `${battletag}'s failed in adding role info`);\n          console.log(error) \n        }\n      }\n      \n    }) ()\n  \n  },[workingAddPlayer])\n  */\n  // copy: https://www.npmjs.com/package/react-copy-to-clipboard\n  \n  \n  return (\n  <DivAddingPlayer>\n        \n    <DivHeader>\n      <DivTitle> \n        <Div> {`${planTeam.title}`}  </Div>\n        \n        {(authority===\"administrator\")?\n          <IconAdministrator width={\"30px\"} height={\"24px\"} /> \n          : <IconViewer width={\"27px\"} height={\"24px\"} /> \n        }\n      \n      </DivTitle>\n      \n      <GroupCopy>\n        \n        <CopyToClipboard \n          text={`https://ps.avantwing.com/team-generator/${planTeam._id}`}\n          onCopy={ () => { addRemoveNotification(\"success\", \"viewer link has been copied\") } } >\n          \n          <ButtonCopy> \n            <IconCopy width={\"20px\"} height={\"20px\"} /> \n            <Div> Viewing Link </Div>\n          </ButtonCopy> \n          \n        </CopyToClipboard>\n        \n        { (authority === \"administrator\") && \n          <CopyToClipboard \n            text={`https://ps.avantwing.com/team-generator/${planTeam._id}?pw=${planTeam.password}`}\n            onCopy={ () => { addRemoveNotification(\"success\", \"administrator link has been copied\") } } >\n            \n            <ButtonCopy>\n              <IconCopy width={\"20px\"} height={\"20px\"} /> \n              <Div> Editing Link </Div>\n            </ButtonCopy> \n            \n          </CopyToClipboard>\n        }\n        \n      </GroupCopy>\n      \n    </DivHeader>\n    \n    \n    \n   <DivBody>\n\n\t    <DivInputAdd>\n\t      <InputBattletag {...inputBattletag} placeholder=\"battletag#1234\" />\n\t      \n\t      \n\t      { (authority === \"viewer\") && workingAddPlayer && \n          <ButtonAdd> \n            <DivIconWorking>\n              <IconWorking width={\"27px\"} height={\"24px\"} />  \n            </DivIconWorking>\n          </ButtonAdd>\n        }\n        \n        { (authority === \"viewer\") && !workingAddPlayer &&\n          <ButtonAdd onClick = {  (event)=> onClick_ButtonAdd(event, \"pending\")} > Apply </ButtonAdd>\n        }\n        \n        \n        \n        { (authority === \"administrator\") && workingAddPlayer && \n          <ButtonAdd> \n            <DivIconWorking>\n              <IconWorking width={\"27px\"} height={\"24px\"} />\n            </DivIconWorking>\n          </ButtonAdd>\n        }\n        \n        { (authority === \"administrator\") && !workingAddPlayer && \n          <>\n            <ButtonAdd onClick = {  (event)=> onClick_ButtonAdd(event, \"confirmed\")} > Add </ButtonAdd>\n          </>\n        }\n\n        \n\t    </DivInputAdd>\n\t    \n\t    \n\t    \n   </DivBody>\n  \n  </DivAddingPlayer>\n        \n  \n  )\n\n}\n\n// <InputName {...inputName} placeholder=\"name\" />\n\t  \n\n\nfunction mapStateToProps(state) { \n  return { \n   \n    workingAddPlayer: state.working.addPlayer\n    //,workingPutPlayerMmr: state.working.putPlayerMmr\n    \n    //,idPlanTeam: state.idPlanTeam\n    //,passwordPlanTeam: state.planTeam.password\n    \n    //, loadingPlanTeam: state.loading.planTeam\n    //, readyPlanTeam: state.ready.planTeam\n    \n    , authority: state.authority\n    , planTeam: {...state.planTeam}\n    \n  }; \n} \n\nfunction mapDispatchToProps(dispatch) { \n  return { \n    \n    addRemoveNotification: (situation, message, time) => dispatch( addRemoveNotification(situation, message, time) )\n    ,replaceWorking: (which, true_false) => dispatch(replaceWorking(which, true_false))\n    \n    ,readPlanTeam: (idPlanTeam) => dispatch(readPlanTeam(idPlanTeam)) \n\n  }; \n}\n\n// 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\nexport default connect(mapStateToProps, mapDispatchToProps)(AddingPlayer);"]},"metadata":{},"sourceType":"module"}