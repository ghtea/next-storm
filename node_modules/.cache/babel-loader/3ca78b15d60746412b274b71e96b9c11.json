{"ast":null,"code":"var _jsxFileName = \"/usr/projects/next-storm/src/routes/CompGallery.js\";\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport queryString from 'query-string';\nimport { Route, NavLink } from 'react-router-dom';\nimport View from \"../components/Comp\";\nimport { connect } from \"react-redux\";\nimport { replaceData, replaceReady, replaceLoading, replaceWorking, replaceAuthority } from \"../redux/store\";\nimport addRemoveNotification from \"../redux/thunks/addRemoveNotification\";\nimport { Div, Input, Button } from '../styles/DefaultStyles';\nimport IconLoading from '../svgs/basic/IconLoading';\nconst DivCompGallery = styled(Div)`\n  width: 100%;\n  \n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  \n  @media (max-width: ${props => props.theme.media.mid_big - 1}px ) {\n    \n  }\n\n  @media (min-width:  ${props => props.theme.media.mid_big}px) {\n    \n  }\n`;\nconst SubCompGallery = styled(Div)`\n\n  background-color: ${props => props.theme.COLOR_middle};\n  color: ${props => props.theme.color_normal};\n  \n  position: fixed;\n  display: flex;\n  \n  \n  \n  @media (max-width: ${props => props.theme.media.mid_big - 1}px ) {\n    top: 50px;\n    left: 0px;\n    \n    width: 100%;\n  \theight: 50px; \n    \n    flex-direction: row;\n  \tborder-bottom: 1px solid ${props => props.theme.color_very_weak};\n  }\n\n  @media (min-width:  ${props => props.theme.media.mid_big}px) {\n    top: 0px;\n    left: 0px;\n    z-index: 0;\n    \n    width: 100%;\n  \theight: 50px; \n    \n    flex-direction: row;\n  \tborder-bottom: 1px solid ${props => props.theme.color_very_weak};\n  }\n  \n  \n`;\nconst Main = styled(Div)`\n  \n  width: 100%;\n  height: 100%;\n  \n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  @media (max-width: ${props => props.theme.media.mid_big - 1}px ) {\n    \n    margin-top: 100px; /* Sub + SubCompGallery */\n  \t\n\t}\n \n  @media (min-width:  ${props => props.theme.media.mid_big}px) {\n    margin-left: 120px; /* Sub */\n    margin-top: 50px; /* SubCompGallery */\n    \n  }\n`;\n\nconst CompGallery = ({\n  match,\n  location,\n  authority,\n  replaceAuthority,\n  addRemoveNotification\n}) => {\n  // 처음 마운트는 무시, readyPlanTeam X -> O 일때 플랜 비번확인\n  useEffect(() => {\n    const query = queryString.parse(location.search);\n    const keyMasterTrying = query.master; //if (isFirstRun.current) {isFirstRun.current = false; return; } // 처음 렌더링 넘어가기 (아직 스토어 업데이트 반영 잘 못해서..)\n    // 참고1 https://stackoverflow.com/questions/53351517/react-hooks-skip-first-run-in-useeffect\n    // 참고2 https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables\n\n    if (!keyMasterTrying) {\n      replaceAuthority(\"comp_gallery\", \"viewer\"); //addRemoveNotification(\"success\", \"welcome viewer!\");\n    } else if (listKeyMaster.includes(keyMasterTrying)) {\n      replaceAuthority(\"comp_gallery\", \"master\");\n      addRemoveNotification(\"success\", \"welcome master!\"); // 여기서 해당 키로 다시 서버에서 마스터 유저 정보 가져오기\n    } // if keyMaster is wrong\n    else {\n        replaceAuthority(\"comp_gallery\", \"viewer\");\n        addRemoveNotification(\"error\", \"master key is wrong\");\n      }\n  }, []);\n  return /*#__PURE__*/React.createElement(CompGallery, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(SubCompGallery, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Div, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, \" COMP GALLERY \")), /*#__PURE__*/React.createElement(Main, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: match.path,\n    component: Gallery,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: `${match.path}/add`,\n    component: Add,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: `${match.path}/view`,\n    component: View,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  })));\n}; //CompGallery\n\n\nfunction mapStateToProps(state) {\n  return {\n    authority: state.authority.comp_gallery,\n    readyPlanTeam: state.ready.planTeam\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    //readPlanTeam: (idPlanTeam) => dispatch(readPlanTeam(idPlanTeam)) \n    //,replaceData: (which, newData) => dispatch(replaceData(which, newData))\n    //,replaceLoading: (which, true_false) => dispatch(replaceLoading(which, true_false)) \n    //,replaceReady: (which, true_false) => dispatch(replaceReady(which, true_false)) \n    replaceAuthority: (which, authority) => dispatch(replaceAuthority(which, authority)),\n    addRemoveNotification: (situation, message, time, idNotification) => dispatch(addRemoveNotification(situation, message, time, idNotification))\n  };\n} // 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CompGallery);","map":{"version":3,"sources":["/usr/projects/next-storm/src/routes/CompGallery.js"],"names":["React","useEffect","useRef","styled","axios","queryString","Route","NavLink","View","connect","replaceData","replaceReady","replaceLoading","replaceWorking","replaceAuthority","addRemoveNotification","Div","Input","Button","IconLoading","DivCompGallery","props","theme","media","mid_big","SubCompGallery","COLOR_middle","color_normal","color_very_weak","Main","CompGallery","match","location","authority","query","parse","search","keyMasterTrying","master","listKeyMaster","includes","path","Gallery","Add","mapStateToProps","state","comp_gallery","readyPlanTeam","ready","planTeam","mapDispatchToProps","dispatch","which","situation","message","time","idNotification"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef} from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport queryString from 'query-string';\nimport { Route, NavLink } from 'react-router-dom';\n\nimport View from \"../components/Comp\"\n\nimport { connect } from \"react-redux\";\n\nimport {replaceData, replaceReady, replaceLoading, replaceWorking, replaceAuthority} from \"../redux/store\";\n\nimport addRemoveNotification from \"../redux/thunks/addRemoveNotification\";\n\nimport {Div, Input, Button} from '../styles/DefaultStyles';\n\nimport IconLoading from '../svgs/basic/IconLoading'\n\n\n\nconst DivCompGallery = styled(Div)`\n  width: 100%;\n  \n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  \n  @media (max-width: ${props => (props.theme.media.mid_big -1) }px ) {\n    \n  }\n\n  @media (min-width:  ${props => (props.theme.media.mid_big) }px) {\n    \n  }\n`;\n\n\nconst SubCompGallery = styled(Div)`\n\n  background-color: ${props => props.theme.COLOR_middle};\n  color: ${props => props.theme.color_normal};\n  \n  position: fixed;\n  display: flex;\n  \n  \n  \n  @media (max-width: ${props => (props.theme.media.mid_big -1) }px ) {\n    top: 50px;\n    left: 0px;\n    \n    width: 100%;\n  \theight: 50px; \n    \n    flex-direction: row;\n  \tborder-bottom: 1px solid ${props => props.theme.color_very_weak};\n  }\n\n  @media (min-width:  ${props => (props.theme.media.mid_big) }px) {\n    top: 0px;\n    left: 0px;\n    z-index: 0;\n    \n    width: 100%;\n  \theight: 50px; \n    \n    flex-direction: row;\n  \tborder-bottom: 1px solid ${props => props.theme.color_very_weak};\n  }\n  \n  \n`\n\nconst Main = styled(Div)`\n  \n  width: 100%;\n  height: 100%;\n  \n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  @media (max-width: ${props => (props.theme.media.mid_big -1) }px ) {\n    \n    margin-top: 100px; /* Sub + SubCompGallery */\n  \t\n\t}\n \n  @media (min-width:  ${props => (props.theme.media.mid_big) }px) {\n    margin-left: 120px; /* Sub */\n    margin-top: 50px; /* SubCompGallery */\n    \n  }\n`\n\n\n\n\nconst CompGallery = ({\n  \n  match, location\n  \n  , authority\n  \n  ,replaceAuthority\n  , addRemoveNotification\n  \n}) => {\n  \n \n  \n  // 처음 마운트는 무시, readyPlanTeam X -> O 일때 플랜 비번확인\n  useEffect(()=>{\n    \n    const query = queryString.parse(location.search);\n    const keyMasterTrying = query.master;\n    \n    //if (isFirstRun.current) {isFirstRun.current = false; return; } // 처음 렌더링 넘어가기 (아직 스토어 업데이트 반영 잘 못해서..)\n    // 참고1 https://stackoverflow.com/questions/53351517/react-hooks-skip-first-run-in-useeffect\n    // 참고2 https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables\n    \n    \n \n      \n    if (!keyMasterTrying) {\n      replaceAuthority(\"comp_gallery\", \"viewer\");\n      //addRemoveNotification(\"success\", \"welcome viewer!\");\n    }\n    \n    else if ( listKeyMaster.includes(keyMasterTrying)  ) {\n      replaceAuthority(\"comp_gallery\", \"master\");\n      addRemoveNotification(\"success\", \"welcome master!\");\n      \n      // 여기서 해당 키로 다시 서버에서 마스터 유저 정보 가져오기\n    }\n    \n\n    // if keyMaster is wrong\n    else {\n      replaceAuthority(\"comp_gallery\", \"viewer\");\n      addRemoveNotification(\"error\", \"master key is wrong\");\n    }\n    \n  }, [] )\n    \n    \n  \n   return (\n   <CompGallery>\n      \n      <SubCompGallery>\n        <Div> COMP GALLERY </Div>\n      </SubCompGallery>\n      \n      \n      <Main>\n      \n        <Route exact path={match.path} component={Gallery} /> \n        <Route path={`${match.path}/add`} component={Add} />\n        <Route path={`${match.path}/view`} component={View} />\n        \n      </Main>\n    \n  \n    </CompGallery>\n    )\n}\n  \n \n    \n //CompGallery\n\n\n\nfunction mapStateToProps(state) { \n  return { \n    authority: state.authority.comp_gallery\n    \n    , readyPlanTeam: state.ready.planTeam\n  \n  }; \n} \n\nfunction mapDispatchToProps(dispatch) { \n  return { \n    //readPlanTeam: (idPlanTeam) => dispatch(readPlanTeam(idPlanTeam)) \n    \n    //,replaceData: (which, newData) => dispatch(replaceData(which, newData))\n    //,replaceLoading: (which, true_false) => dispatch(replaceLoading(which, true_false)) \n    //,replaceReady: (which, true_false) => dispatch(replaceReady(which, true_false)) \n    \n    replaceAuthority: (which, authority) => dispatch(replaceAuthority(which, authority))\n    \n    ,addRemoveNotification: (situation, message, time, idNotification) => dispatch( addRemoveNotification(situation, message, time, idNotification) )\n  }; \n}\n\n// 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\nexport default connect(mapStateToProps, mapDispatchToProps)(CompGallery);\n"]},"metadata":{},"sourceType":"module"}