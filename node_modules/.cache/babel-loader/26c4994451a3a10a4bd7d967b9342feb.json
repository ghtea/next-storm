{"ast":null,"code":"var _jsxFileName = \"/usr/projects/parallel-storm/src/components/TeamGenerator/Result.js\";\nimport dotenv from 'dotenv';\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport { NavLink, useParams } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { addResult } from \"../../redux/store\";\nimport readPlanTeam from \"../../redux/thunks/readPlanTeam\"; // https://reacttraining.com/blog/react-router-v5-1/\n\nimport { Div, Table, Tr, Td } from '../../styles/DefaultStyles';\nimport IconLoading from '../../svgs/IconLoading';\nimport IconConfirmed from '../../svgs/IconConfirmed';\nimport IconPending from '../../svgs/IconPending';\nimport IconInfo from '../../svgs/IconInfo';\nimport IconMagic from '../../svgs/basic/IconMagic';\nconst DivResult = styled(Div)`\n  width: 100%;\n  max-width: 600px;\n  \n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n  \n  padding-bottom: 10px;\n`;\nconst DivTitle = styled(Div)`\n  margin-top: 10px;\n  font-size: 1.2rem;\n  font-weight: bold;\n  \n  margin-bottom: 10px;\n`;\n\nconst Result = ({\n  option,\n  listPlayerEntry\n}) => {\n  const region = option.region;\n  const numberTeamsPlanned = option.numberTeams;\n  const listPlayerBattletag = Object.keys(listPlayerEntry).map(element => listPlayerEntry[element]._id); // list of battletags, this can be modified by .sort\n  // 1. confirmed - 2. leader - 3. less roles player(2, 1) - 4. rest\n\n  const onClick_generateTeams = event => {\n    //  후반에 쓰게될 정렬 함수\n    const sortListBattletagByMmrHigherFirst = (battletag1, battletag2) => {\n      // mmr 높은순으로 list of battletags\n      const objPlayer1 = listPlayerEntry.find(objPlayer => objPlayer._id === battletag1);\n      const objPlayer2 = listPlayerEntry.find(objPlayer => objPlayer._id === battletag2);\n      return objPlayer2.mmr.standard[region] - objPlayer1.mmr.standard[region]; // ex 3333, 222, 1111\n    }; // 먼저 leader, confirmed  인 것들 고려해서 총 플레이 인원 뽑기\n    // 그다음 총 리스트를 leader, 플레이 역할 적은 플레이어, 그외 로 세 개로 나누기\n    // 각각의 3개의 리스트 안에서 mmr 높은 순으로 정렬\n    // 정렬 지키면서, 세 리스트 합치기 \n    // 정렬된 플레이러들을, [indexTeam, indextIn5] :  (example of 3 teams)\n    //  [0,0] [1,0] [2,0]   [2,1] [1,1] [0,1]   [0,2] [1,2] [2,2]   [2,3] [1,3 [0,3]  마지막 주기는  mmr 총합 낮은 팀에 mmr 높은 사람 넣는 식으로!\n\n\n    const listBattletagLeader = listPlayerBattletag.filter(battletag => {\n      const objPlayer = listPlayerBattletag.find(objPlayer => objPlayer._id === battletagPlayer);\n      return objPlayer.tags.includes(\"leader\");\n    });\n    console.log(listPlayerLeader); //orderPlayer = \n    //console.log(orderPlayer)\n\n    for (var i = 0; i < numberTeams; i++) {\n      const teamName = `team${i + 1}`;\n      objTeams[teamName] = `it is ${teamName}`;\n      listTeamName.push(teamName);\n    }\n\n    setResult(result + 1);\n    console.log(result);\n    console.log(objTeams);\n    /*\r\n    {\r\n      _id: String,\r\n      listPlayerBattletag: [String],\r\n      name: String,\r\n      group: String\r\n    }\r\n    */\n\n    let team1 = {\n      _id: Date.now(),\n      listPlayerBattletag: [\"mbcat#1234\", \"mbcat#1703\"],\n      name: \"dragon team\"\n    };\n    let resultTeam = {\n      added: Date.now(),\n      listTeam: [team1]\n    };\n    addResult(resultTeam);\n  };\n\n  return /*#__PURE__*/React.createElement(DivResult, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(DivTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, \" Result \"), /*#__PURE__*/React.createElement(Div, {\n    onClick: onClick_generateTeams,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, \"button\"), result && listTeamName.map(element => /*#__PURE__*/React.createElement(Div, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, \" \", element, \" \")));\n};\n\nfunction mapStateToProps(state) {\n  return {\n    option: state.planTeam.option,\n    listPlayerEntry: state.planTeam.listPlayerEntry //listPlayerEntry: [...state.planTeam.listPlayerEntry]\n    //,workingAddPlayerToListPlayerEntry: state.working.addPlayerToListPlayerEntry\n    //,readyPlanTeam: state.ready.planTeam\n    //,loading: state.loading\n\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addResult: resultTeam => dispatch(addResult(resultTeam))\n  };\n} // TableEntry 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Result);","map":{"version":3,"sources":["/usr/projects/parallel-storm/src/components/TeamGenerator/Result.js"],"names":["dotenv","React","useState","useEffect","styled","axios","NavLink","useParams","connect","addResult","readPlanTeam","Div","Table","Tr","Td","IconLoading","IconConfirmed","IconPending","IconInfo","IconMagic","DivResult","DivTitle","Result","option","listPlayerEntry","region","numberTeamsPlanned","numberTeams","listPlayerBattletag","Object","keys","map","element","_id","onClick_generateTeams","event","sortListBattletagByMmrHigherFirst","battletag1","battletag2","objPlayer1","find","objPlayer","objPlayer2","mmr","standard","listBattletagLeader","filter","battletag","battletagPlayer","tags","includes","console","log","listPlayerLeader","i","teamName","objTeams","listTeamName","push","setResult","result","team1","Date","now","name","resultTeam","added","listTeam","mapStateToProps","state","planTeam","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import dotenv from 'dotenv';\r\nimport React, {useState, useEffect} from 'react';\r\nimport styled from 'styled-components';\r\nimport axios from 'axios';\r\nimport { NavLink, useParams } from 'react-router-dom';\r\n\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {addResult} from \"../../redux/store\";\r\nimport readPlanTeam from \"../../redux/thunks/readPlanTeam\";\r\n// https://reacttraining.com/blog/react-router-v5-1/\r\n\r\nimport {Div, Table, Tr, Td} from '../../styles/DefaultStyles';\r\n\r\nimport IconLoading from '../../svgs/IconLoading'\r\n\r\nimport IconConfirmed from '../../svgs/IconConfirmed'\r\nimport IconPending from '../../svgs/IconPending'\r\nimport IconInfo from '../../svgs/IconInfo'\r\nimport IconMagic from  '../../svgs/basic/IconMagic'\r\n\r\n\r\n\r\nconst DivResult = styled(Div)`\r\n  width: 100%;\r\n  max-width: 600px;\r\n  \r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  \r\n  padding-bottom: 10px;\r\n`;\r\n\r\nconst DivTitle = styled(Div)`\r\n  margin-top: 10px;\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  \r\n  margin-bottom: 10px;\r\n`\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst Result = ({option, listPlayerEntry}) => {\r\n  \r\n  const region = option.region;\r\n  const numberTeamsPlanned = option.numberTeams;\r\n  const listPlayerBattletag = (Object.keys(listPlayerEntry)).map(element=>listPlayerEntry[element]._id); // list of battletags, this can be modified by .sort\r\n  \r\n\r\n  // 1. confirmed - 2. leader - 3. less roles player(2, 1) - 4. rest\r\n  const onClick_generateTeams = (event) => {\r\n    \r\n    //  후반에 쓰게될 정렬 함수\r\n    const sortListBattletagByMmrHigherFirst = (battletag1, battletag2) => {    // mmr 높은순으로 list of battletags\r\n      \r\n      const objPlayer1 = listPlayerEntry.find(objPlayer => objPlayer._id === battletag1)\r\n      const objPlayer2 = listPlayerEntry.find(objPlayer => objPlayer._id === battletag2)\r\n      \r\n      return (objPlayer2.mmr.standard[region] - objPlayer1.mmr.standard[region]);\r\n      // ex 3333, 222, 1111\r\n    }\r\n    \r\n    \r\n    // 먼저 leader, confirmed  인 것들 고려해서 총 플레이 인원 뽑기\r\n    // 그다음 총 리스트를 leader, 플레이 역할 적은 플레이어, 그외 로 세 개로 나누기\r\n    // 각각의 3개의 리스트 안에서 mmr 높은 순으로 정렬\r\n    // 정렬 지키면서, 세 리스트 합치기 \r\n    // 정렬된 플레이러들을, [indexTeam, indextIn5] :  (example of 3 teams)\r\n      //  [0,0] [1,0] [2,0]   [2,1] [1,1] [0,1]   [0,2] [1,2] [2,2]   [2,3] [1,3 [0,3]  마지막 주기는  mmr 총합 낮은 팀에 mmr 높은 사람 넣는 식으로!\r\n    \r\n    const listBattletagLeader = listPlayerBattletag.filter(\r\n      battletag => {\r\n        const objPlayer = listPlayerBattletag.find(objPlayer => objPlayer._id === battletagPlayer)\r\n        return (objPlayer.tags.includes(\"leader\"))\r\n      }\r\n    )\r\n    \r\n    console.log(listPlayerLeader);\r\n    //orderPlayer = \r\n    //console.log(orderPlayer)\r\n    \r\n    for (var i =0; i<numberTeams; i++) {\r\n      const teamName = `team${i+1}`;\r\n      objTeams[teamName] = `it is ${teamName}`\r\n      listTeamName.push(teamName);\r\n    }\r\n    \r\n    setResult(result+1);\r\n    console.log(result)\r\n    console.log(objTeams);\r\n    \r\n    /*\r\n    {\r\n      _id: String,\r\n      listPlayerBattletag: [String],\r\n      name: String,\r\n      group: String\r\n    }\r\n    */\r\n    \r\n    let team1 = {\r\n      _id: Date.now()\r\n      ,listPlayerBattletag: [\"mbcat#1234\", \"mbcat#1703\"]\r\n      ,name: \"dragon team\"\r\n    }\r\n    \r\n    let resultTeam = {\r\n      added: Date.now()\r\n      ,listTeam: [\r\n        team1\r\n        \r\n      ]\r\n    }\r\n    \r\n    addResult(resultTeam);\r\n  }\r\n  \r\n  \r\n  \r\n  return (\r\n  \r\n  <DivResult>\r\n    \r\n    <DivTitle> Result </DivTitle>\r\n    \r\n    <Div onClick={onClick_generateTeams}> \r\n      button\r\n    </Div>\r\n  \r\n    {result && listTeamName.map(element=>\r\n      <Div> {element} </Div>\r\n    )}\r\n    \r\n    \r\n  </DivResult>\r\n    \r\n  )\r\n}\r\n\r\n\r\n\r\n\r\nfunction mapStateToProps(state) { \r\n  return { \r\n    option: state.planTeam.option\r\n    ,listPlayerEntry: state.planTeam.listPlayerEntry\r\n    //listPlayerEntry: [...state.planTeam.listPlayerEntry]\r\n    //,workingAddPlayerToListPlayerEntry: state.working.addPlayerToListPlayerEntry\r\n    //,readyPlanTeam: state.ready.planTeam\r\n    //,loading: state.loading\r\n  }; \r\n} \r\n\r\nfunction mapDispatchToProps(dispatch) { \r\n  return { \r\n    addResult: (resultTeam) => dispatch( addResult(resultTeam) ) \r\n  }; \r\n}\r\n\r\n\r\n// TableEntry 컴포넌트에서 redux의 state, dispatch 를 일부분 골라서 이용가능하게 된다\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Result);"]},"metadata":{},"sourceType":"module"}