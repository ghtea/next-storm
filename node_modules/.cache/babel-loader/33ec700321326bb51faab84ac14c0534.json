{"ast":null,"code":"import _regeneratorRuntime from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _taggedTemplateLiteral from\"/usr/projects/parallel-storm/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n\\n\\tmargin-top: 5px;\\n\\t\\n\\tfont-size: 0.9rem;\\n\\tcolor: \",\";\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  width: 60px;\\n  height: 100%;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n\\twidth: 160px;\\n\\theight: 100%;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n\\n\\theight: 2rem;\\n\\t\\n\\tdisplay: flex;\\n  flex-direction: row;\\n  justify-content: center;\\n  align-items: center;\\n  \\n  & > * {\\n  \\tmargin-left: 5px;\\n  \\tmargin-right: 5px;\\n  }\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n\\n\\tdisplay: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  \\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  color: \",\";\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 1.6rem;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: flex-start;\\n  align-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  grid-area: add;\\n  height:100%;\\n  \\n  display: flex;\\n  flex-direction: column;\\n  justify-content: space-evenly;\\n  align-items: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}//import dotenv from 'dotenv';\nimport React from'react';import styled from'styled-components';import{NavLink,useHistory}from'react-router-dom';import{Div,Input,Button}from'../styles/DefaultStyles';import axios from'axios';import useInput from'../tools/hooks/useInput';import{getTimeStamp}from'../tools/vanilla/time';//import {ahr} from '../api';\n/*\ndotenv.config({ \n  path: './.env' \n});\n*/var DivCreatingPlan=styled(Div)(_templateObject());var DivHeader=styled(Div)(_templateObject2());var DivTitle=styled(Div)(_templateObject3());var DivId=styled(Div)(_templateObject4(),function(props){return props.theme.color_weak;});var DivBody=styled(Div)(_templateObject5());var DivInputAdd=styled(Div)(_templateObject6());var InputBattletag=styled(Input)(_templateObject7());var ButtonAddFirst=styled(Button)(_templateObject8());var DivCaution=styled(Div)(_templateObject9(),function(props){return props.theme.color_weak;});var reqPutPlayerMmr=function reqPutPlayerMmr(battletag){return{filter:{_id:battletag}};};// \"listPlayerEntry._id\": { $ne: battletag }  }   //very important  // https://stackoverflow.com/questions/26328891/push-value-to-array-if-key-does-not-exist-mongoose\n// already know there is no PlaTeam with same id\nvar reqCreatePlanTeam=function reqCreatePlanTeam(idPlanTeam,battletag){return{filter:{_id:idPlanTeam},update:{_id:idPlanTeam,listPlayerEntry:[{_id:battletag}]}};};var CreatingPlan=function CreatingPlan(){//{value, onChange}\nvar inputBattletag=useInput(\"\");var history=useHistory();var onClick_ButtonAddFirst=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var battletag,idPlanTeam;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!inputBattletag.value){_context.next=17;break;}_context.prev=1;battletag=inputBattletag.value;_context.next=5;return axios.put(\"https://ahr.avantwing.com/PlayerMmr\",reqPutPlayerMmr(battletag));case 5:// 위에서 에러가 나서 아래로 진행 안시키게 해보자\nidPlanTeam=getTimeStamp();_context.next=8;return axios.put(\"https://ahr.avantwing.com/PlanTeam\",reqCreatePlanTeam(idPlanTeam,battletag));case 8:// pass id of new PlanTeam to body of request\n//process.env.URL_AHR + \"/PlanTeam\" makes error\nconsole.log(\"ahr worked well\");history.push(\"/team-generator/\".concat(idPlanTeam));_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 15:_context.next=18;break;case 17:console.log(\"type battletag first\");case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function onClick_ButtonAddFirst(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(DivCreatingPlan,null,/*#__PURE__*/React.createElement(DivHeader,null,/*#__PURE__*/React.createElement(DivTitle,null,\" Team Generator \"),/*#__PURE__*/React.createElement(DivId,null,\" add battletag first to start \")),/*#__PURE__*/React.createElement(DivBody,null,/*#__PURE__*/React.createElement(DivInputAdd,null,/*#__PURE__*/React.createElement(InputBattletag,Object.assign({},inputBattletag,{placeholder:\"battletag#1234\"})),/*#__PURE__*/React.createElement(ButtonAddFirst,{onClick:onClick_ButtonAddFirst},\" Add \"))));};export default CreatingPlan;","map":{"version":3,"sources":["/usr/projects/parallel-storm/src/components/CreatingPlan.js"],"names":["React","styled","NavLink","useHistory","Div","Input","Button","axios","useInput","getTimeStamp","DivCreatingPlan","DivHeader","DivTitle","DivId","props","theme","color_weak","DivBody","DivInputAdd","InputBattletag","ButtonAddFirst","DivCaution","reqPutPlayerMmr","battletag","filter","_id","reqCreatePlanTeam","idPlanTeam","update","listPlayerEntry","CreatingPlan","inputBattletag","history","onClick_ButtonAddFirst","e","value","put","console","log","push"],"mappings":"4vEAAA;AACA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CAGA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,kBAApC,CAEA,OAAQC,GAAR,CAAaC,KAAb,CAAoBC,MAApB,KAAiC,yBAAjC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,OAAQC,YAAR,KAA2B,uBAA3B,CAEA;AACA;;;;EAMA,GAAMC,CAAAA,eAAe,CAAGT,MAAM,CAACG,GAAD,CAAT,mBAArB,CAWA,GAAMO,CAAAA,SAAS,CAAGV,MAAM,CAACG,GAAD,CAAT,oBAAf,CAOA,GAAMQ,CAAAA,QAAQ,CAAGX,MAAM,CAACG,GAAD,CAAT,oBAAd,CAGA,GAAMS,CAAAA,KAAK,CAAGZ,MAAM,CAACG,GAAD,CAAT,oBACA,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACC,KAAN,CAAYC,UAAhB,EADL,CAAX,CAKA,GAAMC,CAAAA,OAAO,CAAGhB,MAAM,CAACG,GAAD,CAAT,oBAAb,CASA,GAAMc,CAAAA,WAAW,CAAGjB,MAAM,CAACG,GAAD,CAAT,oBAAjB,CAgBA,GAAMe,CAAAA,cAAc,CAAGlB,MAAM,CAACI,KAAD,CAAT,oBAApB,CAOA,GAAMe,CAAAA,cAAc,CAAGnB,MAAM,CAACK,MAAD,CAAT,oBAApB,CAKA,GAAMe,CAAAA,UAAU,CAAGpB,MAAM,CAACG,GAAD,CAAT,oBAKN,SAAAU,KAAK,QAAIA,CAAAA,KAAK,CAACC,KAAN,CAAYC,UAAhB,EALC,CAAhB,CAUA,GAAMM,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,SAAD,CAAe,CACrC,MAAO,CACLC,MAAM,CAAE,CAACC,GAAG,CAAEF,SAAN,CADH,CAAP,CAGD,CAJD,CAMA;AAGA;AACA,GAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,UAAD,CAAaJ,SAAb,CAA2B,CACnD,MAAO,CACLC,MAAM,CAAE,CAACC,GAAG,CAAEE,UAAN,CADH,CAGJC,MAAM,CAAE,CACPH,GAAG,CAAEE,UADE,CAENE,eAAe,CAAE,CAAE,CAACJ,GAAG,CAAEF,SAAN,CAAF,CAFX,CAHJ,CAAP,CAQD,CATD,CAYC,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAE1B;AACA,GAAMC,CAAAA,cAAc,CAAGvB,QAAQ,CAAC,EAAD,CAA/B,CAEA,GAAMwB,CAAAA,OAAO,CAAG7B,UAAU,EAA1B,CAEA,GAAM8B,CAAAA,sBAAsB,0FAAG,iBAAOC,CAAP,+IAEzBH,cAAc,CAACI,KAFU,0CAKnBZ,SALmB,CAKPQ,cAAc,CAACI,KALR,uBASnB5B,CAAAA,KAAK,CAAC6B,GAAN,CAAW,qCAAX,CAAkDd,eAAe,CAACC,SAAD,CAAjE,CATmB,QAUzB;AAGMI,UAbmB,CAaNlB,YAAY,EAbN,uBAcnBF,CAAAA,KAAK,CAAC6B,GAAN,CAAW,oCAAX,CAAiDV,iBAAiB,CAACC,UAAD,CAAaJ,SAAb,CAAlE,CAdmB,QAc0E;AACnG;AAEAc,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAEAN,OAAO,CAACO,IAAR,2BAAgCZ,UAAhC,GAnByB,iFAqBjBU,OAAO,CAACC,GAAR,cArBiB,uCA+B3BD,OAAO,CAACC,GAAR,CAAY,sBAAZ,EA/B2B,qEAAH,kBAAtBL,CAAAA,sBAAsB,4CAA5B,CAoCA,mBAEA,oBAAC,eAAD,mBAEE,oBAAC,SAAD,mBACE,oBAAC,QAAD,yBADF,cAGE,oBAAC,KAAD,uCAHF,CAFF,cAQE,oBAAC,OAAD,mBAEE,oBAAC,WAAD,mBACE,oBAAC,cAAD,kBAAoBF,cAApB,EAAoC,WAAW,CAAC,gBAAhD,GADF,cAEE,oBAAC,cAAD,EAAgB,OAAO,CAAIE,sBAA3B,UAFF,CAFF,CARF,CAFA,CAwBD,CAnEA,CAuED,cAAeH,CAAAA,YAAf","sourcesContent":["//import dotenv from 'dotenv';\nimport React from 'react';\nimport styled from 'styled-components';\n\n\nimport { NavLink, useHistory } from 'react-router-dom';\n\nimport {Div, Input, Button} from '../styles/DefaultStyles';\n\nimport axios from 'axios';\nimport useInput from '../tools/hooks/useInput';\nimport {getTimeStamp} from '../tools/vanilla/time';\n\n//import {ahr} from '../api';\n/*\ndotenv.config({ \n  path: './.env' \n});\n*/\n\nconst DivCreatingPlan = styled(Div)`\n  grid-area: add;\n  height:100%;\n  \n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n`;\n\n\nconst DivHeader = styled(Div)`\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: center;\n`\n\nconst DivTitle = styled(Div)`\n  font-size: 1.6rem;\n`\nconst DivId = styled(Div)`\n  color: ${props => props.theme.color_weak};\n`\n\n\nconst DivBody = styled(Div)`\n\n\tdisplay: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  \n`\n\nconst DivInputAdd = styled(Div)`\n\n\theight: 2rem;\n\t\n\tdisplay: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  \n  & > * {\n  \tmargin-left: 5px;\n  \tmargin-right: 5px;\n  }\n`\n\n\nconst InputBattletag = styled(Input)`\n\twidth: 160px;\n\theight: 100%;\n`\n\n\n\nconst ButtonAddFirst = styled(Button)`\n  width: 60px;\n  height: 100%;\n`\n\nconst DivCaution = styled(Div)`\n\n\tmargin-top: 5px;\n\t\n\tfont-size: 0.9rem;\n\tcolor: ${props => props.theme.color_weak};\n`\n\n\n\nconst reqPutPlayerMmr = (battletag) => {  \n  return {\n    filter: {_id: battletag }\n  }\n};\n\n// \"listPlayerEntry._id\": { $ne: battletag }  }   //very important  // https://stackoverflow.com/questions/26328891/push-value-to-array-if-key-does-not-exist-mongoose\n\n\n// already know there is no PlaTeam with same id\nconst reqCreatePlanTeam = (idPlanTeam, battletag) => {  \n  return {\n    filter: {_id: idPlanTeam }\n    \t\t\n    ,update: {\n      _id: idPlanTeam \n      ,listPlayerEntry: [ {_id: battletag} ]\n    }\n  }\n};\n\n\n const CreatingPlan = () => {\n  \n  //{value, onChange}\n  const inputBattletag = useInput(\"\");\n   \n  const history = useHistory(); \n  \n  const onClick_ButtonAddFirst = async (e) => {\n    \n    if (inputBattletag.value) {\n      try {  \n        \n        const battletag = inputBattletag.value;\n        \n        \n        \n        await axios.put (\"https://ahr.avantwing.com/PlayerMmr\", reqPutPlayerMmr(battletag));\n        // 위에서 에러가 나서 아래로 진행 안시키게 해보자\n        \n        \n        const idPlanTeam = getTimeStamp(); \n        await axios.put( \"https://ahr.avantwing.com/PlanTeam\", reqCreatePlanTeam(idPlanTeam, battletag) ); // pass id of new PlanTeam to body of request\n        //process.env.URL_AHR + \"/PlanTeam\" makes error\n        \n        console.log(\"ahr worked well\")\n        \n        history.push(`/team-generator/${idPlanTeam}`);\n      }\n      catch(e) {console.log(e)}\n      \n      //e.preventDefault();\n      //addPlayerMmr();\n      //inputUrlRym.value = ''; \n      //selectRating.value = 0;\n      \n      \n      \n    } else {\n      console.log(\"type battletag first\")\n    }\n  }  \n\n  \n  return (\n  \n  <DivCreatingPlan>\n        \n    <DivHeader>\n      <DivTitle> Team Generator </DivTitle>\n      \n      <DivId> add battletag first to start </DivId>\n    </DivHeader>\n    \n    <DivBody>\n\t   \n\t\t    <DivInputAdd>\n\t\t      <InputBattletag {...inputBattletag} placeholder=\"battletag#1234\" />\n\t\t      <ButtonAddFirst onClick = {onClick_ButtonAddFirst} > Add </ButtonAddFirst>\n\t\t    </DivInputAdd>\n\t\t    \n\t    \n\t   </DivBody>\n  \n  </DivCreatingPlan>\n  \n  )\n\n}\n  \n\t  \n\nexport default CreatingPlan;"]},"metadata":{},"sourceType":"module"}