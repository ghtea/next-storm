{"ast":null,"code":"import { getTimeStamp } from '../tools/vanilla/time';\nimport { toggleArrayElement } from '../tools/vanilla/array';\nconst REPLACE_READY = \"REPLACE_READY\";\nconst REPLACE_LOADING = \"REPLACE_LOADING\";\nconst REPLACE_WORKING = \"REPLACE_WORKING\";\nconst REPLACE_AUTHORITY = \"REPLACE_AUTHORITY\";\nconst REPLACE_DATA = \"REPLACE_DATA\";\nconst REPLACE_DATA_2 = \"REPLACE_DATA_2\";\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\nconst REMOVE_NOTIFICATION = \"REMOVE_NOTIFICATION\";\nconst ADD_RESULT = \"ADD_RESULT\";\nconst DELETE_RESULT = \"DELETE_RESULT\";\nconst REPLACE_PLAYER_TAGS = \"REPLACE_PLAYER_TAGS\";\nconst REPLACE_PLAYER_STATUS = \"REPLACE_PLAYER_STATUS\";\nconst REPLACE_REGION = \"REPLACE_REGION\";\nconst REPLACE_NUMBER = \"REPLACE_NUMBER\";\nconst stateInitial = {\n  ready: {\n    planTeam: false,\n    dictHeroBasic: false\n  },\n  loading: {\n    planTeam: false\n  },\n  working: {\n    createPlan: false,\n    addPlayer: false,\n    putPlayerMmr: false,\n    addPlayerToListPlayerEntry: false,\n    addPlayerMmrStandardToListPlayerEntry: false\n  },\n  notification: [],\n  themeName: \"light\",\n  authority: {\n    team_generator: \"viewer\" // \"administrator\" \"viewer\"\n    ,\n    comp_gallery: \"viewer\" // \"master\" \"viewer\"\n\n  } // team-generator\n  ,\n  idPlanTeam: \"\",\n  planTeam: {\n    _id: \"_id\",\n    password: \"password\",\n    title: \"title\",\n    listResult: [],\n    listPlayerEntry: [{\n      _id: \"test\",\n      tags: []\n    }],\n    option: {}\n  } // comp-gallery\n  ,\n  comp_gallery: {\n    listComp: [] // searching\n    ,\n    fComp: {} // VIEW a comp\n    ,\n    aComp: {} // ADD a comp\n\n  } // common\n  ,\n  hots: {\n    dictHeroBasic: {}\n  }\n};\n\nconst reducer = ( // 기본값 설정\nstate = stateInitial, // 액션별로 새로운 state 반환하기\naction) => {\n  switch (action.type) {\n    /*\n    case REPLACE_RERENDER:\n      return {\n      \t...state, \n      \trerender: {\n      \t  ...state.rerender\n      \t  ,[action.which]: getTimeStamp()\n      \t}\n      };\n      */\n    case REPLACE_DATA:\n      if (!!action.data && action.data.constructor === Array) {\n        return { ...state,\n          [action.which]: [...action.data]\n        };\n      } else if (!!action.data && action.data.constructor === Object) {\n        return { ...state,\n          [action.which]: { ...action.data\n          }\n        };\n      } else {\n        return { ...state,\n          [action.which]: action.data\n        };\n      }\n\n    case REPLACE_DATA_2:\n      if (!!action.data && action.data.constructor === Array) {\n        return { ...state,\n          [action.which1]: { ...state[action.which1],\n            [action.which2]: [...action.data]\n          }\n        };\n      } else if (!!action.data && action.data.constructor === Object) {\n        return { ...state,\n          [action.which1]: { ...state[action.which1],\n            [action.which2]: { ...action.data\n            }\n          }\n        };\n      } else {\n        return { ...state,\n          [action.which1]: { ...state[action.which1],\n            [action.which2]: action.data\n          }\n        };\n      }\n\n    case REPLACE_READY:\n      return { ...state,\n        ready: { ...state.ready,\n          [action.which]: action.true_false\n        }\n      };\n\n    case REPLACE_LOADING:\n      return { ...state,\n        loading: { ...state.loading,\n          [action.which]: action.true_false\n        }\n      };\n\n    case REPLACE_WORKING:\n      return { ...state,\n        working: { ...state.working,\n          [action.which]: action.true_false\n        }\n      };\n\n    case REPLACE_AUTHORITY:\n      return { ...state,\n        authority: { ...state.authority,\n          [action.which]: action.authority\n        }\n      };\n\n    case ADD_NOTIFICATION:\n      const listIdNotification = state.notification.map(element => element.idNotification); // list of idNotification\n\n      if (!listIdNotification.includes(action.idNotification)) {\n        // 기존에 동일한 아이디의 알림이 없어야 추가\n        return { ...state,\n          notification: [{\n            situation: action.situation,\n            message: action.message,\n            idNotification: action.idNotification\n          }, ...state.notification]\n        };\n      } else {\n        return state;\n      }\n\n    case REMOVE_NOTIFICATION:\n      return { ...state,\n        notification: state.notification.filter(element => element.idNotification !== action.idNotification)\n      };\n\n    case ADD_RESULT:\n      // 같은 id의 result 가 이미 존재하면 그거 먼저 빼놓기\n      const listResultAlreday = state.planTeam.listResult.filter(element => element._id === action.result._id);\n      const listResultOthers = state.planTeam.listResult.filter(element => element._id !== action.result._id);\n      const listResultAll = [action.result, ...listResultOthers];\n      const listResultLocal = listResultAll.filter(element => element._id === \"local\");\n      const listResultNotLocal = listResultAll.filter(element => element._id !== \"local\");\n      const listResultAllSorted = [...listResultLocal, ...listResultNotLocal];\n      return { ...state,\n        planTeam: { ...state.planTeam,\n          listResult: [...listResultAllSorted]\n        }\n      };\n    // return\n\n    case DELETE_RESULT:\n      const listResultFiltered = state.planTeam.listResult.filter(element => element._id !== action.idResult);\n      return { ...state,\n        planTeam: { ...state.planTeam,\n          listResult: [...listResultFiltered]\n        }\n      };\n    // return\n\n    case REPLACE_REGION:\n      return { ...state,\n        planTeam: { ...state.planTeam,\n          option: { ...state.planTeam.option,\n            region: action.region\n          }\n        }\n      };\n\n    case REPLACE_NUMBER:\n      let whichNumber;\n      let valueCurrent;\n\n      if (action.which === \"team\") {\n        whichNumber = \"numberTeams\";\n        valueCurrent = action.pairNumber[0];\n      } else if (action.which === \"group\") {\n        whichNumber = \"numberGroups\";\n        valueCurrent = action.pairNumber[1];\n      }\n\n      if (action.how === \"center\") {\n        return { ...state,\n          planTeam: { ...state.planTeam,\n            option: { ...state.planTeam.option,\n              [whichNumber]: 0\n            }\n          }\n        };\n      } else if (action.how === \"plus\") {\n        return { ...state,\n          planTeam: { ...state.planTeam,\n            option: { ...state.planTeam.option,\n              [whichNumber]: state.planTeam.option[whichNumber] + 1\n            }\n          }\n        };\n      } else if (action.how === \"minus\" && !(valueCurrent == 0)) {\n        return { ...state,\n          planTeam: { ...state.planTeam,\n            option: { ...state.planTeam.option,\n              [whichNumber]: state.planTeam.option[whichNumber] - 1\n            }\n          }\n        };\n      } else if (action.how === \"minus\" && valueCurrent == 0) {\n        return { ...state,\n          planTeam: { ...state.planTeam,\n            option: { ...state.planTeam.option,\n              [whichNumber]: 0\n            }\n          }\n        };\n      }\n\n    case REPLACE_PLAYER_TAGS:\n      const index1 = state.planTeam.listPlayerEntry.findIndex(objPlayer => objPlayer._id === action.battletag);\n      return { ...state,\n        planTeam: { ...state.planTeam,\n          listPlayerEntry: state.planTeam.listPlayerEntry.map(objPlayer => objPlayer._id === action.battletag ? { ...objPlayer,\n            tags: toggleArrayElement(state.planTeam.listPlayerEntry[index1][\"tags\"], action.tag, action.true_false)\n          } : objPlayer)\n        }\n      };\n\n    case REPLACE_PLAYER_STATUS:\n      return { ...state,\n        planTeam: { ...state.planTeam,\n          listPlayerEntry: state.planTeam.listPlayerEntry.map(objPlayer => objPlayer._id === action.battletag ? { ...objPlayer,\n            status: action.status\n          } : objPlayer)\n        }\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/usr/projects/next-storm/src/redux/reducer.js"],"names":["getTimeStamp","toggleArrayElement","REPLACE_READY","REPLACE_LOADING","REPLACE_WORKING","REPLACE_AUTHORITY","REPLACE_DATA","REPLACE_DATA_2","ADD_NOTIFICATION","REMOVE_NOTIFICATION","ADD_RESULT","DELETE_RESULT","REPLACE_PLAYER_TAGS","REPLACE_PLAYER_STATUS","REPLACE_REGION","REPLACE_NUMBER","stateInitial","ready","planTeam","dictHeroBasic","loading","working","createPlan","addPlayer","putPlayerMmr","addPlayerToListPlayerEntry","addPlayerMmrStandardToListPlayerEntry","notification","themeName","authority","team_generator","comp_gallery","idPlanTeam","_id","password","title","listResult","listPlayerEntry","tags","option","listComp","fComp","aComp","hots","reducer","state","action","type","data","constructor","Array","which","Object","which1","which2","true_false","listIdNotification","map","element","idNotification","includes","situation","message","filter","listResultAlreday","result","listResultOthers","listResultAll","listResultLocal","listResultNotLocal","listResultAllSorted","listResultFiltered","idResult","region","whichNumber","valueCurrent","pairNumber","how","index1","findIndex","objPlayer","battletag","tag","status"],"mappings":"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","sourcesContent":["import {getTimeStamp} from '../tools/vanilla/time'\nimport {toggleArrayElement} from '../tools/vanilla/array'\n\n\nconst REPLACE_READY = \"REPLACE_READY\";\nconst REPLACE_LOADING = \"REPLACE_LOADING\";\nconst REPLACE_WORKING = \"REPLACE_WORKING\";\nconst REPLACE_AUTHORITY = \"REPLACE_AUTHORITY\";\n\nconst REPLACE_DATA = \"REPLACE_DATA\";\nconst REPLACE_DATA_2 = \"REPLACE_DATA_2\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\nconst REMOVE_NOTIFICATION = \"REMOVE_NOTIFICATION\";\n\nconst ADD_RESULT = \"ADD_RESULT\";\nconst DELETE_RESULT = \"DELETE_RESULT\";\n\nconst REPLACE_PLAYER_TAGS = \"REPLACE_PLAYER_TAGS\";\nconst REPLACE_PLAYER_STATUS = \"REPLACE_PLAYER_STATUS\";\nconst REPLACE_REGION = \"REPLACE_REGION\";\nconst REPLACE_NUMBER = \"REPLACE_NUMBER\";\n\n\nconst stateInitial = { \n    \n    ready : {\n      planTeam: false\n      ,dictHeroBasic: false\n    }\n    \n    ,loading : {\n      planTeam: false\n    }\n    \n    \n    ,working : {\n      createPlan: false\n      \n      ,addPlayer: false\n      ,putPlayerMmr: false\n      ,addPlayerToListPlayerEntry: false\n      ,addPlayerMmrStandardToListPlayerEntry: false\n    }\n    \n    ,notification : []\n    \n    \n    ,themeName: \"light\"\n    \n  \n    \n    \n    \n    \n    \n   \n    ,authority: {\n      team_generator: \"viewer\" // \"administrator\" \"viewer\"\n      , comp_gallery: \"viewer\" // \"master\" \"viewer\"\n    }\n    \n    \n    // team-generator\n    ,idPlanTeam: \"\"\n    ,planTeam: {\n      _id:\"_id\"\n      ,password:\"password\"\n      ,title:\"title\"\n      ,listResult:[]\n      ,listPlayerEntry: [\n        {\n          _id: \"test\"\n          , tags: []\n        }\n      ]\n      , option: {}\n    }\n    \n    \n    // comp-gallery\n    ,comp_gallery: {\n      \n      listComp : []  // searching\n      , fComp: {} // VIEW a comp\n      \n      , aComp: {} // ADD a comp\n    }\n    \n    // common\n    , hots: {\n      dictHeroBasic: {}\n    }\n    \n  };\n\n\n\nconst reducer = (\n  \n  // 기본값 설정\n  state = stateInitial, \n  \n  // 액션별로 새로운 state 반환하기\n  action) => {\n    \n  switch (action.type) {\n    \n    /*\n    case REPLACE_RERENDER:\n      return {\n      \t...state, \n      \trerender: {\n      \t  ...state.rerender\n      \t  ,[action.which]: getTimeStamp()\n      \t}\n      };\n      */\n      \n    case REPLACE_DATA:\n      \n      if ( (!!action.data) && (action.data.constructor === Array) ) {\n        return {\n      \t...state, \n      \t[action.which]: [...action.data]\n        }\n      }\n      \n      else if ( (!!action.data) && (action.data.constructor === Object) ) {\n        return {\n      \t...state, \n      \t[action.which]: {...action.data}\n        }\n      }\n      else {\n        return {\n        \t...state, \n        \t[action.which]: action.data\n        }\n      }\n      \n    \n    case REPLACE_DATA_2:\n      \n      if ( (!!action.data) && (action.data.constructor === Array) ) {\n        return {\n        \t...state, \n        \t[action.which1]: {\n        \t  ...state[action.which1]\n        \t  ,[action.which2]: [...action.data]\n        \t}\n        }\n      }\n      \n      else if ( (!!action.data) && (action.data.constructor === Object) ) {\n        return {\n        \t...state, \n        \t[action.which1]: {\n        \t  ...state[action.which1]\n        \t  ,[action.which2]: {...action.data}\n        \t}\n        }\n      }\n        \n      \n      else {\n        return {\n        \t...state, \n        \t[action.which1]: {\n        \t  ...state[action.which1]\n        \t  ,[action.which2]: action.data\n        \t}\n        }\n      } \n        \n\n      \n      \n    case REPLACE_READY:\n      return {\n      \t...state, \n      \tready: {\n      \t  ...state.ready,\n      \t  [action.which]: action.true_false\n      \t}\n      };\n      \n    case REPLACE_LOADING:\n      return {\n      \t...state, \n      \tloading: {\n      \t  ...state.loading,\n      \t  [action.which]: action.true_false\n      \t}\n      };\n      \n    case REPLACE_WORKING:\n      return {\n      \t...state, \n      \tworking: {\n      \t  ...state.working,\n      \t  [action.which]: action.true_false\n      \t}\n      };\n      \n   case REPLACE_AUTHORITY:\n    return {\n    \t...state, \n    \tauthority: {\n    \t  ...state.authority,\n    \t  [action.which]: action.authority\n    \t}\n    };\n      \n    case ADD_NOTIFICATION:\n      \n      const listIdNotification = state.notification.map(element => element.idNotification); // list of idNotification\n      if ( !(listIdNotification.includes(action.idNotification)) ) {  // 기존에 동일한 아이디의 알림이 없어야 추가\n        return {\n      \t...state, \n      \t\n      \tnotification: [\n      \t  {\n      \t    situation: action.situation\n      \t    ,message: action.message\n      \t    ,idNotification: action.idNotification\n      \t  }\n      \t  , ...state.notification\n      \t]\n      \t\n        };\n      }\n      else {return state}\n      \n      \n    \n    case REMOVE_NOTIFICATION:\n      return {\n      \t...state, \n      \tnotification: state.notification.filter(element => element.idNotification !== action.idNotification)\n      };\n    \n    \n    case ADD_RESULT:\n      \n      // 같은 id의 result 가 이미 존재하면 그거 먼저 빼놓기\n      \n      const listResultAlreday = state.planTeam.listResult.filter(element => element._id === action.result._id);\n      const listResultOthers = state.planTeam.listResult.filter(element => element._id !== action.result._id);\n      \n    \n      const listResultAll = [action.result, ...listResultOthers];\n      \n      const listResultLocal = listResultAll.filter(element => element._id === \"local\");\n      const listResultNotLocal = listResultAll.filter(element => element._id !== \"local\");\n      \n      const listResultAllSorted = [...listResultLocal, ...listResultNotLocal];\n      \n      return {\n      \t...state, \n      \tplanTeam: {\n      \t  ...state.planTeam\n      \t  , listResult: [...listResultAllSorted]\n      \t}\n      } // return\n      \n      \n    case DELETE_RESULT:\n      \n      const listResultFiltered = state.planTeam.listResult.filter(element => element._id !== action.idResult);\n      \n      return {\n      \t...state, \n      \tplanTeam: {\n      \t  ...state.planTeam\n      \t  , listResult: [...listResultFiltered]\n      \t}\n      } // return\n      \n      \n    case REPLACE_REGION:\n      return {\n      \t...state, \n      \t\n      \tplanTeam: {\n      \t  ...state.planTeam\n      \t  , option: {\n      \t    ...state.planTeam.option\n      \t    , region: action.region\n      \t  }\n      \t}\n      \t\n      };\n      \n    case REPLACE_NUMBER:\n      \n      let whichNumber;\n      let valueCurrent;\n      \n      if (action.which === \"team\") {\n        whichNumber = \"numberTeams\"\n        valueCurrent = action.pairNumber[0];\n      }\n      else if (action.which === \"group\") {\n        whichNumber = \"numberGroups\"\n        valueCurrent = action.pairNumber[1];\n      }\n      \n      \n        \n      \n      if (action.how === \"center\") {\n        return {\n          ...state,\n          planTeam: {\n            ...state.planTeam\n        \t  , option: {\n        \t    ...state.planTeam.option\n        \t    , [whichNumber]: 0\n        \t  }\n          }\n        }\n      }\n      else if  (action.how === \"plus\") {\n        return {\n          ...state,\n          planTeam: {\n            ...state.planTeam\n        \t  , option: {\n        \t    ...state.planTeam.option\n        \t    , [whichNumber]: ( (state.planTeam.option)[whichNumber] + 1)\n        \t  }\n          }\n        }\n      }\n      else if  (action.how === \"minus\" && !(valueCurrent == 0)) {\n        return {\n          ...state,\n          planTeam: {\n            ...state.planTeam\n        \t  , option: {\n        \t    ...state.planTeam.option\n        \t    , [whichNumber]: ( (state.planTeam.option)[whichNumber] - 1)\n        \t  }\n          }\n        }\n      }\n      else if  (action.how === \"minus\" && (valueCurrent == 0)) {\n        return {\n          ...state,\n          planTeam: {\n            ...state.planTeam\n        \t  , option: {\n        \t    ...state.planTeam.option\n        \t    , [whichNumber]: 0\n        \t  }\n          }\n        }\n      }\n       \n      \n    case REPLACE_PLAYER_TAGS:\n      \n      const index1 = (state.planTeam.listPlayerEntry).findIndex( objPlayer => objPlayer._id === action.battletag);\n      \n      \n      return {\n        ...state, \n      \t\n      \tplanTeam: {\n      \t  ...state.planTeam\n      \t  \n      \t  , listPlayerEntry: state.planTeam.listPlayerEntry.map(\n      \t      objPlayer => (objPlayer._id === action.battletag)? \n      \t        {...objPlayer, tags:toggleArrayElement(state.planTeam.listPlayerEntry[index1][\"tags\"], action.tag, action.true_false) }\n      \t        : objPlayer\n      \t    )\n      \t}\n      }\n    \n    case REPLACE_PLAYER_STATUS:\n      \n\n      return {\n        ...state, \n      \t\n      \tplanTeam: {\n      \t  ...state.planTeam\n      \t  \n      \t  , listPlayerEntry: state.planTeam.listPlayerEntry.map(\n      \t      objPlayer => (objPlayer._id === action.battletag)? \n      \t        {...objPlayer, status:action.status }\n      \t        : objPlayer\n      \t    )\n      \t}\n      }\n      \n    default:\n      return state;\n  }\n};\n\n\nexport default reducer;\n"]},"metadata":{},"sourceType":"module"}